/*!
 * Copyright (c) 2009 Sergiy Kovalchuk (serg472@gmail.com)
 *
 * Copyright (c) 2015 Rob Calcroft - For jquery-loadmask-plus
 * 
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *  
 * Following code is based on Element.mask() implementation from ExtJS framework (http://extjs.com/)
 *
 */
!function(e){e.fn.mask=function(a){a=a||{};var s,t=a.delay,i=a.label,o=a.iconColour;e(this).each(function(){void 0!==t&&t>0?(s=e(this),s.data("_mask_timeout",window.setTimeout(function(){e.maskElement(e(this),{label:o?!1:i,iconColour:i?!1:o,bgColour:a.bgColour?a.bgColour:void 0})},t))):e.maskElement(e(this),{label:o?!1:i,iconColour:i?!1:o,bgColour:a.bgColour?a.bgColour:void 0})})},e.fn.unmask=function(){e(this).each(function(){e.unmaskElement(e(this))})},e.fn.isMasked=function(){return this.hasClass("masked")},e.maskElement=function(a,s){var t,i,o,n=s.label,d=s.iconColour,r=s.bgColour;if(n&&d)throw new Error("Label and icon colour are specified; they are mutually exclusive");void 0!==a.data("_mask_timeout")&&(window.clearTimeout(a.data("_mask_timeout")),a.removeData("_mask_timeout")),a.isMasked()&&e.unmaskElement(a),"static"===String(a.css("position"))&&a.addClass("masked-relative"),a.addClass("masked"),i=e('<div class="loadmask"></div>'),window.navigator.userAgent.toLowerCase().indexOf("msie")>-1&&(i.height(a.height()+parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom"))),i.width(a.width()+parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")))),window.navigator.userAgent.toLowerCase().indexOf("msie 6")>-1&&a.find("select").addClass("masked-hidden"),a.append(i),t=e('<div class="loadmask-msg" style="display:none;"></div>'),o=n?n:'<div class="loader" title="1"> <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"> <path fill="#000" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z"> <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"/> </path> </svg> </div>',t.append("<div>"+o+"</div>"),a.append(t),t.css("top",Math.round(a.height()/2-(t.height()-parseInt(t.css("padding-top"))-parseInt(t.css("padding-bottom")))/2)+"px"),t.css("left",Math.round(a.width()/2-(t.width()-parseInt(t.css("padding-left"))-parseInt(t.css("padding-right")))/2)+"px"),void 0!==d&&e("svg rect").css("fill",d),void 0!==r&&e(i).css("background-color",r),t.show()},e.unmaskElement=function(e){void 0!==e.data("_mask_timeout")&&(window.clearTimeout(e.data("_mask_timeout")),e.removeData("_mask_timeout")),e.find(".loadmask-msg,.loadmask").remove(),e.removeClass("masked"),e.removeClass("masked-relative"),e.find("select").removeClass("masked-hidden")}}(jQuery);